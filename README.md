![Заголовок с логотипом Палантира. Логотип сгенерирован ИИ, но мне нравится](palantir_head.png)
# Палантир
---
Палантир - это веб-приложение, помогающее методисту и/или заведующему отделения ДМШ/ДШИ в его ежедневной работе

---
### Что умеет это приложение?
Если коротко, то Палантир позволяет вести учёт учеников, преподавателей, отделений, мероприятий, а также различных документов, сданных преподавателями. Работает исключительно **локально**, т.е. **не требует доступа в Интернет**, но при этом работает из браузера.

### Детали
Палантир состоит из множества составляющих, которые отвечают за отдельный аспект школы. Вот их неполный перечень и возможности:

<details>
<summary>Ученики</summary>

- список учеников с указанием класса и срока обучения, года приёма, преподавателя, отделения, адреса проживания (удобно для настройщика или планирования расписания исходя из удалённости проживания);
- разделение списка на четыре группы: активные (которые учатся в данный момент), выпускники, находящиеся в академическом отпуске, отчисленные;
- исчерпывающая информация об ученике: класс, отделение, преподаватель, сведения о родителях/опекунах. Есть показатели углубленного уровня (если в школе есть такие программы);
- личное дело с возможностью генерировать титульную страницу в редактируемом формате Microsoft Word (DOCX);
- учёт участия в концертах и конкурсах как соло, так и в составе коллектива (в т.ч. дуэта);
- учёт сданных зачётов и экзаменов с указанием оценки за этот зачёт/экзамен;
- у отчисленных и выпускников можно указать дату и причину выбытия, а у выпускников дополнительно можно указать номер свидетельства об окончании школы;
- возможность массовой генерации титульных страниц для личного дела для приведения всех дел к единому стилю оформления;
- возможность скачать полный список учеников с группировкой по отделениям. Список содержит полные ФИО детей и класс в формате `класс/срок обучения`
</details>

<details>
<summary>Преподаватели</summary>

- список преподавателей с отображением сданных отчётов, методических докладов и открытых уроков, а также с указанием количества учеников, закреплённых за преподавателем;
- отдельная страница преподавателя с указанием отделения, к которому тот принадлежит, и списком его учеников (аналогично с общим списком учеников модуля **Ученики**);
- возможность ввести в систему отчёт преподавателя по предмету (по окончании каждой четверти и года) с последующим отражением этих данных на странице преподавателя. Количественные и качественные показатели вычисляются автоматически;
- таблица с учениками преподавателя: отображает как имена учеников (со ссылкой на их страницу), так и их класс, отделение, а также участие в концертах и конкурсах (соло/коллектив) с указанием общей суммы публичных выступлений;
</details>

<details>
<summary>Отделения</summary>

- список отделений с указанием количества учеников на нём, а также отражение факта сданных отчётов по успеваемости на отделении;
- страница отделения: список преподавателей отделения, а также учеников отделения. Структура списка учеников аналогична структуре на странице преподавателя модуля **Преподаватели**;
- возможность скачать список учеников отделения.
</details>

> [!NOTE]
> Несмотря на то, что список возможностей модуля **Отделения** небольшой, он является, наравне с модулями **Ученики** и **Преподаватели**, краеугольным камнем системы.

<details>
<summary>Коллективы</summary>

- возможность создания коллективов - как школьные дуэты, так и ансамбли (не только фортепианные)
- список коллективов и учеников, входящих в них;
- возможность добавить коллектив в качестве участника конкурса или концерта.
</details>

<details>
<summary>События</summary>

- список событий (конкурсов и концертов), прошедших и запланированных в текущем учебном году;
- отражение следующих данных:
	- статус события (запланировано/прошло);
	- учебный год и четверть;
	- дата;
	- название мероприятия;
	- место проведения (по умолчанию это **ДМШ**);
	- ответственный преподаватель;
	- количество участников мероприятия;
	- список действий для каждого события: добавление участника (соло/коллектив), редактирование мероприятия, отметка о завершении, удаление мероприятия из базы;
- страница отдельного мероприятия дублирует данные из общего списка, дополнительно показывая список участников мероприятия. Добавление солистов и коллективов автоматически отражается на личной странице ученика. На этой странице можно добавить или удалить участника;
</details>

<details>
<summary>Управление</summary>

- **Протоколы**: добавление протокола проведения зачёта/экзамена по предмету на отделении с возможностью его выгрузки в формате Microsoft Word для дальнейшего редактирования. Все показатели рассчитываются автоматически;
- **Методические заседания**: фиксация в базе заседаний методического объединения для дальнейшей выгрузки и формирования отчёта заведующего методического объединения;
- **Виды аттестации**: создание, редактирование и удаление различных видов промежуточной и итоговой аттестации, применяемой в школе, с указанием количества протоколов с этим видом аттестации.
</details>

Система ещё находится в разработке, но её краеугольные камни -- модули **Ученики**, **Преподаватели** и **Отделения** -- уже отточены и готовы к применению на практике.

### Стек (набор) технологий, использованных при разработке

- Python: 3.9
- Flask: 3.1.2
- Flask-SQLAlchemy: 3.1
- Flask-Migrate: 4.1.0
- python-docx: 1.2.0
- Flask-WTF: 1.2

### Установка
#### Linux (Debian/\*buntu/Linux Mint и аналогичные сборки на базе Debian)
В системах на базе Linux, как правило, интерпретатор уже установлен. Убедитесь, что у вас установлена последняя версия:
```shell
sudo apt update
sudo apt upgrade
```
Установите **Pipenv**. Эта утилита создаёт виртуальное окружение - изолированное от системы пространство, в пределах которого вы можете устанавливать необходимые для работы пакеты, не засоряя основную систему ненужными:
```shell
sudo apt install python3-pipenv
```
Клонируйте репозиторий в удобную папку, перейдите в неё и активируйте (или создайте) окружение:
```shell
pipenv shell
```
Установите все зависимости:
```shell
pipenv sync
```
После установки зависимостей, необходимо создать файл базы данных и заполнить его необходимыми таблицами:
```shell
flask db init
flask db migrate -m 'Создание таблиц для базы данных'
```
Запустите приложение:
```shell
python app.py
```
Откройте браузер и перейдите по адресу `http://127.0.0.1:5000` или `http://192.168.x.x:5000` (вместо x подставьте числа, соответствующие IP-адресу вашего устройства в локальной сети). Доступные для открытия адреса вам покажет консоль.
В главном меню будут отоборажаться только ссылка на главную страницу и пункт меню Отделения - это нормально. По мере заполнения соответствующих разделов вам будут открываться и остальные пункты меню. Это сделано в целях сохранения целостности данных и во избежание возможных ошибок.
#### Windows
На Windows всё _будет_ немного проще: скачиваете установщик, запускаете его, даёте при необходимости нужные разрешения (там криминала нет, это исключительно техническая фишка). После этого открываете новый ярлык на рабочем столе или в меню "Пуск".

### Вопросы
Все вопросы можно задать мне в личку в [Телеграме](https://t.me/brukvo). Скоро будет группа в ТГ (ну не всё же сразу, правда же 😉)
Если хочется предать огласке какую-то собенность (помните: это не баг, а фича 😆), то можете заглянуть в [мой ТГ-канал](https://t.me/muzped) и написать в комментариях к любому (**ЛЮБОМУ**) посту - я отвечу по мере наличия Интернета и свободного времени.